<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>User Profile</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}" />
    <style>
        .navbar {
            background: blue;
            color: #fff;
            padding: 10px 0;
            margin-bottom: 30px;
        }
        .navbar a {
            color: blue;
            text-decoration: none;
            margin: 0 15px;
            font-weight: 500;
        }
        .navbar a:hover {
            text-decoration: underline;
        }
    </style>
</head>

<body>
<div class="navbar">
    <div class="container" style="border:none; padding:0; max-width:900px;">
        <a th:href="@{/elections}">Elections</a>
        <a th:href="@{/admin/elections}" sec:authorize="hasRole('ADMIN')">Admin Dashboard</a>
        <a th:href="@{/profile}">Profile</a>
        <a th:href="@{/logout}">Logout</a>
    </div>
</div>

<div class="container">
    <h2>Your Profile</h2>
    <p>Link your Telegram account to receive OTPs for voting.</p>


    <div th:if="${telegramLinked}" class="alert alert-success">Telegram linked!</div>
    <div th:if="${telegramLinked == false}" class="alert alert-danger">Telegram not linked</div>

    <div th:if="${message}" class="alert alert-success" th:text="${message}"></div>
    <div th:if="${error}" class="alert alert-danger" th:text="${error}"></div>

    <form th:action="@{/profile/generate-link}" method="post">
        <button type="submit">Generate New Telegram Link Command</button>
    </form>

    <hr style="margin: 20px 0;">

    <div th:if="${telegramCommand}" class="token-display">
        <p><strong>Your command is ready!</strong></p>
        <p>Copy the entire line below and send it as a message to your Telegram bot:</p>
        <input type="text" th:value="${telegramCommand}" readonly onclick="this.select();">
    </div>
</div>

</body>
</html>